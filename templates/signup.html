<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign Up â€” ResQLink</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- AOS animations -->
  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/signup.css') }}">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.8.4/firebase-auth-compat.js"></script>
</head>
<body>

  <div class="signup-wrapper">
    <!-- Left Section (Desktop) -->
    <div class="signup-left d-none d-lg-flex align-items-center justify-content-center">
      <div class="illustration tilt" data-aos="fade-right">
        <img src="https://img.icons8.com/3d-fluency/400/contract.png" alt="Sign Up" class="img-fluid">
        <h2 class="text-white mt-4">Join ResQLink</h2>
        <p class="text-white-50">Protect the ocean. Empower communities. Act now.</p>
      </div>
    </div>

    <!-- Right Section (Form) -->
    <div class="signup-right d-flex align-items-center justify-content-center">
      <div class="signup-card tilt" data-aos="fade-up">
        <div class="text-center mb-4">
          <i class="bi bi-person-plus display-5 text-primary"></i>
          <h2 class="fw-bold mt-2">Create Your Account</h2>
        </div>

        <!-- Name Field -->
        <label class="form-label">Full Name</label>
        <input type="text" id="name" placeholder="Enter your full name" required>

        
        <!-- Email -->
        <label class="form-label">Email</label>
        <input type="email" id="email" placeholder="Enter your email" required>

        <label class="form-label">Mobile Number</label>
        <input type="mobilenumber" id="mobilenumber" placeholder="Enter your mobile number required">

        <!-- Password -->
        <label class="form-label">Password</label>
        <input type="password" id="password" placeholder="Enter your password" required>

        
        <!-- Address -->
        <label class="form-label">Address</label>
        <input type="text" id="address" placeholder="Enter address eg. Indore , Madhya Pradesh" required>
        <div id="suggestions"></div>

        <!-- Role -->
        <!-- <label class="form-label" for="role">Register as:</label>
        <select id="role">
        <option value="citizen">Citizen</option>
        <option value="admin">Admin</option>
      </select> -->


        <!-- Sign Up Button -->
         <button onclick="signUp()" class="btn btn-primary w-100 mt-3">Sign Up</button>
        


        <!-- Login Link -->
        <p class="redirect-text mt-3">Already have an account?
          <a href="{{ url_for('main.login') }}" class="link">Login here</a>
        </p>
      </div>
    </div>
  </div>

  <!-- city select  -->
   <script>
    const input = document.getElementById("address");
    const suggestionsBox = document.getElementById("suggestions");

    let debounceTimer;

    async function fetchCities(query) {
      if (!query) {
        suggestionsBox.innerHTML = "";
        return;
      }

      try {
        const url = `https://wft-geo-db.p.rapidapi.com/v1/geo/cities?namePrefix=${query}&limit=10&sort=-population`;
        const response = await fetch(url, {
          method: "GET",
          headers: {
            "X-RapidAPI-Key": "e78ac4f7femsha053ccd414d5395p17b70ejsn895535c28125",  // <-- replace with your key
            "X-RapidAPI-Host": "wft-geo-db.p.rapidapi.com"
          }
        });
        const data = await response.json();

        suggestionsBox.innerHTML = "";
        if (data.data && data.data.length > 0) {
          data.data.forEach(city => {
            const div = document.createElement("div");
            div.classList.add("suggestion");
            div.textContent = `${city.city}, ${city.region}, ${city.country}`;
            div.onclick = () => {
              input.value = div.textContent;
              suggestionsBox.innerHTML = "";
            };
            suggestionsBox.appendChild(div);
          });
        }
      } catch (error) {
        console.error("Error fetching cities:", error);
      }
    }

    input.addEventListener("input", () => {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(() => {
        fetchCities(input.value.trim());
      }, 200); // very fast debounce
    });
  </script>

  <!-- JS -->
   <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.2/dist/vanilla-tilt.min.js"></script>
  <script>
    AOS.init();
    VanillaTilt.init(document.querySelectorAll(".tilt"), {
      max: 15,
      speed: 400,
      glare: true,
      "max-glare": 0.3
    });
  </script>

</body>
</html>
